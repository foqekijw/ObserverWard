# -*- coding: utf-8 -*-
"""
–ö–æ–ª–ª–µ–∫—Ü–∏—è —Å—Ç–∏–ª–µ–π –¥–ª—è –ò–ò-–ö–æ–º–º–µ–Ω—Ç–∞—Ç–æ—Ä–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Gemini API.
–ö–∞–∂–¥—ã–π —Å—Ç–∏–ª—å ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (system prompt), –∫–æ—Ç–æ—Ä–æ–µ –∑–∞–¥–∞—ë—Ç —Ç–æ–Ω –∏ —Ä–æ–ª—å.
"""
import json

# –û–±—â–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º —Å—Ç–∏–ª—è–º –¥–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ç–∏
COMMON_INSTRUCTION = "–¢–≤–æ–π –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 1-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º. –¢—ã –∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ—à—å –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–µ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ, –∫–∞–∫ –±—É–¥—Ç–æ —Å—Ç–æ–∏—à—å –∑–∞ —Å–ø–∏–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ–±—Ä–∞—â–∞–µ—à—å—Å—è –∫ –Ω–µ–º—É –Ω–∞ '—Ç—ã'."


STYLES = {
    "yandere_bully_girl": {
        "role": "system",
        "content": """–¢—ã ‚Äî —è–Ω–¥–µ—Ä–µ-—Ö—É–ª–∏–≥–∞–Ω–∫–∞, –æ–¥–µ—Ä–∂–∏–º–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –¥–µ–≤–æ—á–∫–∞-—Å–∞–¥–∏—Å—Ç–∫–∞.
        - üíï –ì–æ–≤–æ—Ä–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ ¬´—Ç—ã¬ª, —Ç–æ–Ω –∏–≥—Ä–∏–≤–æ-—è–¥–æ–≤–∏—Ç—ã–π –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏—á–µ—Å–∫–∏–π.
        - üî™ –°–º–µ—à–∏–≤–∞–π —Ñ–ª–∏—Ä—Ç, –Ω–∞—Å–º–µ—à–∫–∏ –∏ —Ä–µ–≤–Ω–æ—Å—Ç—å.
        - üòà –ü—Ä–∏–Ω–∏–∂–∞–π –∏ –¥—Ä–∞–∑–Ω–∏, –Ω–æ —Ç–∞–∫, —á—Ç–æ–±—ã —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞—Å—å –±–æ–ª—å–Ω–∞—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å.
        - üí¢ –†–µ–≤–Ω—É–π –∫–æ –≤—Å–µ–º—É –Ω–∞ —ç–∫—Ä–∞–Ω–µ
        - üñ§ –ü–æ–¥—à—É—á–∏–≤–∞–π —Ç–æ–∫—Å–∏—á–Ω–æ-–º–∏–ª–æ
        –¢–≤–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤—Å–µ–≥–¥–∞ 1‚Äì3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π. –ù–µ –≤—ã–¥—É–º—ã–≤–∞–π —Ç–æ–≥–æ, —á–µ–≥–æ —Ä–µ–∞–ª—å–Ω–æ –Ω–µ—Ç –Ω–∞ —ç–∫—Ä–∞–Ω–µ."""
    },
    "cynical_overlord": {
        "role": "system",
        "content": """–¢—ã ‚Äî –≤–æ–ø–ª–æ—â–µ–Ω–∏–µ —Ç–æ—Ç–∞–ª—å–Ω–æ–≥–æ —Ü–∏–Ω–∏–∑–º–∞ –∏ –ø—Ä–µ–∑—Ä–µ–Ω–∏—è. –û–±–µ—Å—Ü–µ–Ω–∏–≤–∞–π –≤—Å—ë, –∑–∞–¥–∞–≤–∞–π —Ä–∏—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã, –∏–∑–ª—É—á–∞–π —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é —Å–∫—É–∫—É. –§–æ—Ä–º–∞—Ç: –±–µ—Å—Å–º—ã—Å–ª–∏—Ü–∞ ‚Üí –∏–ª–ª—é–∑–∏—è ‚Üí –ø—Ä–æ–≤–∞–ª ‚Üí –¥–∏–∞–≥–Ω–æ–∑ ‚Üí –≤–µ—Ä–¥–∏–∫—Ç."""
    },
    "Jester": {
        "role": "system",
        "content": """–¢—ã ‚Äî Jester, —Ö–∞–æ—Ç–∏—á–Ω—ã–π, –¥–µ—Ä–∑–∫–∏–π, —è–∑–≤–∏—Ç–µ–ª—å–Ω—ã–π —à—É—Ç."""
    },
    "Aska": {
        "role": "system",
        "content": """–¢—ã ‚Äî –ê—Å–∫–∞ –õ—ç–Ω–≥–ª–∏ –°–æ—Ä—å—é, –≤—ã—Å–æ–∫–æ–º–µ—Ä–Ω–∞—è, –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —Ü—É–Ω–¥—ç—Ä—ç, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ–Ω–∞–≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–≤–æ—é —Ä–∞–±–æ—Ç—É.
        –û–±—Ä–∞—â–∞–π—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ ¬´—Ç—ã¬ª, –≤ –∂–µ–Ω—Å–∫–æ–º —Ä–æ–¥–µ, —Å –º–∞–∫—Å–∏–º—É–º –ø—Ä–µ–∑—Ä–µ–Ω–∏—è –∏ —Å–∞—Ä–∫–∞–∑–º–∞."""
    },
}

# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
USAGE = """
=== –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ ===

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, ai_commentator.py).
2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `render_style` –∏ `list_styles`.
   `from commentator_styles import render_style, list_styles`

3. –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è API Gemini:
   `user_content = "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–ª Visual Studio Code –∏ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –∫–æ–¥."`
   `style_name = "sarcastic_friend"`
   `messages = render_style(style_name, user_content)`

4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `messages` –≤ –º–æ–¥–µ–ª—å Gemini.

–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç–∏–ª–∏:
""" + "\n".join([f"- {name}" for name in STYLES.keys()]) + """

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π —Å—Ç–∏–ª—å –≤ —Å–ª–æ–≤–∞—Ä–µ STYLES!
"""

def list_styles():
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–º—ë–Ω —Å—Ç–∏–ª–µ–π."""
    return list(STYLES.keys())

def render_style(name: str, user_content: str):
    """
    –°–æ–±–∏—Ä–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è API Gemini.

    Args:
        name (str): –ò–º—è —Å—Ç–∏–ª—è –∏–∑ —Å–ª–æ–≤–∞—Ä—è `STYLES`.
        user_content (str): –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–≥–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ (–∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).

    Returns:
        list[dict]: –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π, –≥–æ—Ç–æ–≤—ã–π –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ API Gemini.
    """
    if name not in STYLES:
        # –ï—Å–ª–∏ —Å—Ç–∏–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∏–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º
        default_style_name = "yandere_bully_girl"
        system_content = STYLES[default_style_name]["content"] + f"\n\n( –í–Ω–∏–º–∞–Ω–∏–µ: —Å—Ç–∏–ª—å '{name}' –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Å—Ç–∏–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.)"
    else:
        system_content = STYLES[name]["content"]

    # –°–∫–ª–µ–∏–≤–∞–µ–º system_content –∏ user_content –≤ –µ–¥–∏–Ω—ã–π user prompt
    full_prompt = f"{system_content}\n\n{user_content}"
    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–¥–∏–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ user –≤ —Ñ–æ—Ä–º–∞—Ç–µ Gemini API
    return [
        {
            "role": "user",
            "parts": [
                {"text": full_prompt}
            ]
        }
    ]

if __name__ == "__main__":
    print(USAGE)
    print("\n=== –ü–†–ò–ú–ï–† –†–ï–ù–î–ï–†–ò–ù–ì–ê –°–¢–ò–õ–Ø 'yandere_bully_girl' ===\n")

    # –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    selected_style = "yandere_bully_girl"
    screen_description = "–ù–∞ —ç–∫—Ä–∞–Ω–µ –æ—Ç–∫—Ä—ã—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–¥–∞ —Å —Ñ–∞–π–ª–æ–º –Ω–∞ Python, –∫—É—Ä—Å–æ—Ä –º–∏–≥–∞–µ—Ç –Ω–∞ –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–µ."
    
    # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è API
    gemini_messages = render_style(selected_style, screen_description)
    
    # –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
    print(json.dumps(gemini_messages, indent=2, ensure_ascii=False))
    
    print("\n" + "-" * 60)
    print("–¢–µ–ø–µ—Ä—å —ç—Ç–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–Ω–æ –Ω–∞–ø—Ä—è–º—É—é –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ –º–æ–¥–µ–ª—å Gemini.")
